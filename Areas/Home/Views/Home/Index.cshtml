@model avatCo.Models.ViewModels.HomePageViewModel
@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="3000" data-bs-wrap="true">
    <div class="carousel-inner">

        <!-- Slide 1 -->
        <div class="carousel-item active">
            <img src="/uploads/Home/Hero1.png" class="d-block w-100" alt="Hero 1">
            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center h-100">
                <h1 class="fw-bold display-5">به فروشگاه اوات کو خوش آمدید</h1>
                <p class="lead">بزرگ‌ترین فروشگاه آنلاین محصولات آزمایشگاهی غرب کشور</p>
                <a href="/Products" class="btn btn-light btn-lg text-white">دیدن محصولات</a>
            </div>
        </div>

        <!-- Slide 2 -->
        <div class="carousel-item">
            <img src="/uploads/Home/Hero2.png" class="d-block w-100" alt="Hero 2">
            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center h-100">
                <h1 class="fw-bold display-5">پشتیبانی و مشاوره رایگان</h1>
                <p class="lead">تیم ما آماده پاسخگویی به سوالات و ارائه مشاوره تخصصی است</p>
                <a href="/Contact/RequestConsultation" class="btn btn-light btn-lg text-white">درخواست مشاوره</a>
            </div>
        </div>

        <!-- Slide 3 -->
        <div class="carousel-item">
            <img src="/uploads/Home/Hero3.png" class="d-block w-100" alt="Hero 3">
            <div class="carousel-caption d-flex flex-column align-items-center justify-content-center h-100">
                <h1 class="fw-bold display-5">ارسال سریع و مطمئن</h1>
                <p class="lead">محصولات شما در کوتاه‌ترین زمان به دستتان می‌رسد</p>
                <a href="/Shipping" class="btn btn-light btn-lg text-white">اطلاعات ارسال</a>
            </div>
        </div>

    </div>

    <!-- Controls -->
    <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">قبلی</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">بعدی</span>
    </button>
</section>

<!-- Special Offers -->
<section class="special-offers container my-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4>پیشنهادات ویژه</h4>
    </div>
    <div class="offers-grid">
        <button class="scroll-btn prev-btn">&lt;</button>
          <div class="row g-4 justify-content-center">
              @foreach (var so in Model.Products.Where(p => p.IsSpecialOffer))
              {
                <div class="offer-card">
                  <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                      <div class="card text-center h-100 offer-card">
                          <img src="@so.ImageUrl" class="offer-img" alt="@so.Title" />
                          <div class="card-body">
                              <h6>@so.Title</h6>
                              <a href="@Url.Action("Details", "Products", new { id = so.Id })" class="stretched-link"></a>
                          </div>
                      </div>
                  </div>
                </div>
              }
          </div>
        <button class="scroll-btn next-btn">&gt;</button>
    </div>
</section>

<!-- Categories Section -->
<section class="categories container my-5" dir="rtl">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h4 class="fw-bold">دسته‌بندی‌ها</h4>
    <a href="/Categories" class="btn btn-outline-primary btn-sm">مشاهده همه</a>
  </div>

  <div class="position-relative categories-wrapper">
    <button class="scroll-btn prev-btn shadow">
      <i class="bi bi-chevron-right"></i>
    </button>

    <div class="categories-scroll-container">
      <div class="row g-4 justify-content-center text-center">
          @foreach (var cat in Model.Categories)
          {
              <div class="col-6 col-md-4 col-lg-3">
                  <div class="category-item">
                      <div class="category-icon">
                          <img src="@cat.ImageUrl" alt="@cat.Name" />
                      </div>
                      <span class="category-name">@cat.Name</span>
                  </div>
              </div>
          }
      </div>

    </div>

    <button class="scroll-btn next-btn shadow">
      <i class="bi bi-chevron-left"></i>
    </button>
  </div>
</section>

<!-- Promos + Services Section -->
<section class="promo-section" dir="rtl">
  <div class="promo-container">
    <!-- Promos Row -->
    <div class="promo-grid">
      <div class="promo-card">
        <img src="@Url.Content("~/uploads/Home/50_parcent.jpg")" alt="۵۰٪ تخفیف">
        <p class="promo-text mt-2">۵۰ درصد تخفیف فقط تا آخر امروز</p>
      </div>

      <div class="promo-card">
        <img src="@Url.Content("~/uploads/Home/Postman.jpg")" alt="ارسال رایگان">
        <p class="promo-text mt-2">تا آخر این ماه هزینه پست با ما</p>
      </div>
    </div>
  </section>

    <!-- Services Row -->
  <section>
      <div class="services-wrapper mt-4">
        <div class="services-grid">
          <article class="service-card">
            <img src="@Url.Content("~/uploads/Home/girl_Chemist.png")" alt="نازل ترین قیمت">
            <div class="overlay"><h3>به نازل‌ترین قیمت</h3></div>
          </article>

          <article class="service-card">
            <img src="@Url.Content("~/uploads/Home/male_chemist2.jpg")" alt="خدمات متناسب">
            <div class="overlay"><h3>خدمات متناسب با نیاز شما</h3></div>
          </article>

          <article class="service-card">
            <img src="@Url.Content("~/uploads/Home/male_chemist.jpg")" alt="تخصص آزمایشگاهی">
            <div class="overlay"><h3>تخصصی‌ترین حوزه‌های آزمایشگاهی</h3></div>
          </article>
        </div>
      </div>
  </section>



<!-- Consultation Section -->
<section class="consult-section bg-light py-5 mt-5" dir="rtl">
  <div class="container text-center">
    <h2 class="fw-bold mb-3">مشاوره رایگان با متخصصان ما</h2>
    <p class="text-muted mb-4 fs-5">
      اگر سوالی دارید یا نیاز به راهنمایی دارید، تیم پشتیبانی ما آماده پاسخگویی است.
    </p>
    <div class="d-flex justify-content-center flex-wrap gap-3">
      <a href="tel:+982612345678" class="btn btn-danger d-flex align-items-center gap-2 rounded-pill shadow px-4 py-2">
        <i class="bi bi-telephone-fill"></i> تماس تلفنی
      </a>
      <a href="https://wa.me/989123456789" class="btn btn-success d-flex align-items-center gap-2 rounded-pill shadow px-4 py-2">
        <i class="bi bi-whatsapp"></i> واتساپ
      </a>
      <a href="/Contact/RequestConsultation" class="btn btn-primary d-flex align-items-center gap-2 rounded-pill shadow px-4 py-2">
        <i class="bi bi-person-lines-fill"></i> درخواست مشاوره
      </a>
    </div>
  </div>
</section>




<script>
// Initialize scrolling for both sections
document.addEventListener('DOMContentLoaded', function() {
    initializeScrolling('.special-offers .scrollable-row', '.special-offers .prev-btn', '.special-offers .next-btn');
    initializeScrolling('.categories-scroll-container', '.categories .prev-btn', '.categories .next-btn');
});

function initializeScrolling(containerSelector, prevBtnSelector, nextBtnSelector) {
    const scrollContainer = document.querySelector(containerSelector);
    const prevBtn = document.querySelector(prevBtnSelector);
    const nextBtn = document.querySelector(nextBtnSelector);
    
    if (!scrollContainer || !prevBtn || !nextBtn) return;
    
    const scrollAmount = 300;
    
    // Scroll functions
    prevBtn.addEventListener('click', () => {
        scrollContainer.scrollBy({
            left: -scrollAmount,
            behavior: 'smooth'
        });
    });
    
    nextBtn.addEventListener('click', () => {
        scrollContainer.scrollBy({
            left: scrollAmount,
            behavior: 'smooth'
        });
    });
    
    // Update button visibility
    function updateButtons() {
        const canScrollLeft = scrollContainer.scrollLeft > 0;
        const canScrollRight = 
            scrollContainer.scrollLeft < 
            (scrollContainer.scrollWidth - scrollContainer.clientWidth - 10);
            
        prevBtn.style.opacity = canScrollLeft ? '1' : '0.3';
        nextBtn.style.opacity = canScrollRight ? '1' : '0.3';
        prevBtn.style.pointerEvents = canScrollLeft ? 'all' : 'none';
        nextBtn.style.pointerEvents = canScrollRight ? 'all' : 'none';
    }
    
    // Initial check and event listeners
    updateButtons();
    scrollContainer.addEventListener('scroll', updateButtons);
    window.addEventListener('resize', updateButtons);
    
    // Touch/swipe support
    let startX;
    let scrollLeft;
    
    scrollContainer.addEventListener('touchstart', (e) => {
        startX = e.touches[0].pageX - scrollContainer.offsetLeft;
        scrollLeft = scrollContainer.scrollLeft;
    });
    
    scrollContainer.addEventListener('touchmove', (e) => {
        if (!startX) return;
        const x = e.touches[0].pageX - scrollContainer.offsetLeft;
        const walk = (x - startX) * 2;
        scrollContainer.scrollLeft = scrollLeft - walk;
    });
}
</script>