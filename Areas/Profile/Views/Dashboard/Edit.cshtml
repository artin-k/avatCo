@{
    ViewData["Title"] = "product";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Edit Profile</h2>
<form method="post" id="editUserForm">
    <div class="mb-3">
        <label>Full Name</label>
        <input type="text" name="FullName" value="@Model.FullName" class="form-control" />
    </div>
    <div class="mb-3">
        <label>Email</label>
        <input type="email" name="Email" value="@Model.Email" class="form-control" />
    </div>
    <div class="mb-3">
        <label>Address</label>
        <input type="text" name="Address" value="@Model.Address" class="form-control" />
    </div>
    <div class="mb-3">
        <label>Phone Number</label>
        <input type="text" name="PhoneNumber" value="@Model.PhoneNumber" class="form-control" />
    </div>
    <div class="mb-3">
        <label>Profile Image URL</label>
        <input type="text" name="ProfileImageUrl" value="@Model.ProfileImageUrl" class="form-control" />
    </div>
    <button type="submit" class="btn btn-primary">Save Changes</button>
</form>


<script>
    $(document).on("submit", "#editUserForm", function (e) {
        e.preventDefault();
        var form = this;
        var fd = new FormData(form);

        var token = $(form).find("input[name='__RequestVerificationToken']").val();
        if (token) fd.append("__RequestVerificationToken", token);

        $.ajax({
            url: $(form).attr("action"),
            type: "POST",
            data: fd,
            contentType: false,
            processData: false
        }).done(function (res) {
            if (res && res.success) {
                $("#editUserModal").modal("hide");
                location.reload();
            } else {
                alert(res?.message || "Update failed");
            }
        }).fail(function (xhr) {
            alert("Error updating product: " + xhr.status + " - " + xhr.responseText);
        });
    });
</script>